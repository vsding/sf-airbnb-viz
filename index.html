<html>

<head>
    <title>San Francisco AirBNB</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet' />
    <!-- <script src="https://d3js.org/d3.v5.min.js">
    </script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    <link rel="stylesheet" type="text/css" href="./css/map.css">
    <link rel="stylesheet" type="text/css" href="./css/article.css">
    <link rel="stylesheet" type="text/css" href="./css/q2_1.css">
</head>

<body>
    <div class="article">
        <!-- title -->
        <div class="titleSection">
            <h1>
                What affects AirBnb customer ratings?
            </h1>
            <h2>
                An investigation of San Francisco Airbnb listings
            </h2>
            <h3 class='attribution'>
                By Maurice Chiang, Vedi Chaudhri, Victoria Ding</br>
                March 16, 2020
            </h3>
        </div>


        <!-- intro -->
        <p class="bodyText drop-cap">
            San Francisco is one of the most popular cities to vacation, live, and work in, and the city attracts people from all around the world. Airbnbs have become an increasingly popular lodging option for people staying in the city for anywhere from one night
            to several months. In addition to factors such as location and price, ratings play a significant role in whether or not someone decides to stay in a certain Airbnb; customers rely heavily on what others think to make decisions. What factors
            distinguish a highly rated listing from a poorly rated one? How do characteristics about the host and the textual description of the listing affect its ratings?
        </p>

        <p class="bodyText">
            The map below shows all current Airbnb listings in the city of San Francisco. Airbnbs with a rating of above 90 are shown in green, ratings above 70 are shown in yellow, and ratings of 70 and below are shown in red. Unrated listings are shown in gray.
            For the purposes of this article, we will define a poor rating as one that is 70 or below.

        </p>

        <!-- q1 viz -->
        <div id="sliderContainer">
            <label for="slider"></br>Maximum rating: <span id="sliderVal"></span></br></br></label>
            <input id="slider" type="range" min="0" max="100" step="1" value="70" />
            <div class="legendContainer">
                <ul class="legend">
                    <li><span class="red"></span> &#8804; 70%</li>
                    <li><span class="yellow"></span> 71 - 90%</li>
                    <li><span class="green"></span> 91 - 100%</li>
                </ul>
            </div>

        </div>
        <script>
            var slider = document.getElementById("slider");
            var output = document.getElementById("sliderVal");
            output.innerHTML = slider.value;
            slider.oninput = function() {
                output.innerHTML = this.value;
            }
        </script>

        <div id='mapContainer'>
            <input id="toggleListingsButton" type="button" value="Show unrated listings" />
            <div id='map'></div>
        </div>
        <script type='module'>
            import { renderMap } from './q1_map.js'; renderMap();
        </script>
        <div class="bodyText">
            The majority of rated Airbnbs have a rating of at least 90, and there are listings with ratings of under 70 and below scattered across the city. While there are no glaring patterns in the location of poorly rated listings, it seems that there is a slightly
            higher density of Airbnbs with poor ratings near the northeast of the city, in the Union Square and Tenderloin neighborhoods.
        </div>
        <div id="q2_container">
            <h3>Host Response Rate vs. Rating </h3>
            <div id='q2Container_1'></div>
            <script type='module'>
                import { render_q2_response_rate } from './q2.js'; render_q2_response_rate();
            </script>
            <div class=" bodyText">Figure 1: [TODO: add description]
            </div>
            <h3>Minimum Nights vs. Rating </h3>
            <div id='q2Container_2'></div>
            <script type='module'>
                import { render_q2_2 } from './q2.js'; render_q2_2();
            </script>
            <div class="bodyText">Figure 2: [TODO: add description]
            </div>
            <h3>Reviews per Month vs. Rating </h3>
            <div id='q2Container_3'></div>
            <script type='module'>
                import { render_q2_3 } from './q2.js'; render_q2_3();
            </script>
            <div class="bodyText">Figure 3: [TODO: add description]
            </div>
            <h3>Cleaning Fee vs. Cleanliness Rating </h3>
            <div id='q2Container_4'></div>
            <script type='module'>
                import { render_q2_4 } from './q2.js'; render_q2_4();
            </script>
            <div class="bodyText">Figure 4: [TODO: add description]
            </div>
            <h3>Price per Person vs. Rating </h3>
            <div id='q2Container_5'></div>
            <script type='module'>
                import { render_q2_5 } from './q2.js'; render_q2_5();
            </script>
            <div class="bodyText">Figure 5: [TODO: add description]
            </div>
            <h3>Host is Superhost vs. Rating -- FIX!!! </h3>
            <div id='q2Container_6'></div>
            <script type='module'>
                import { render_q2_6 } from './q2.js'; render_q2_6();
            </script>
            <div class="bodyText">Figure 6: [TODO: add description]
            </div>
        </div>
        <div id="q3_container">
            <h3>An Analysis of the Text in AirBnB Summaries</h3>
            <div style="float:left;width:45%" id="baddies">
            </div>
            <div style="float:right;width:45%" id="q3tooltip">
            </div>
            <script src="q3.js"></script>

        </div>
        <!-- <script type='module'>
            import { render_q2_response_rate, render_q2_2 } from './q2.js'; render_q2_response_rate();
        </script> -->

    </div>
</body>

</html>