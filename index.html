<html>

<head>
    <title>An Analysis of San Francisco AirBnBs</title>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.8.1/mapbox-gl.css' rel='stylesheet' />
    <!-- <script src="https://d3js.org/d3.v5.min.js">
    </script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <link rel="stylesheet" href="https://cdn.metroui.org.ua/v4/css/metro-all.min.css">
    <script src="https://cdn.metroui.org.ua/v4/js/metro.min.js"></script>
    <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
    <link rel="stylesheet" type="text/css" href="./css/map.css">
    <link rel="stylesheet" type="text/css" href="./css/article.css">
    <link rel="stylesheet" type="text/css" href="./css/q2_1.css">

</head>

<body>
    <div class="article">
        <!-- title -->
        <div class="titleSection">
            <h1>
                What affects customer ratings of AirBnB listings in San Francisco?
            </h1>
            <h2>
                An investigation of San Francisco AirBnBs
            </h2>
            <h3 class='attribution'>
                By Maurice Chiang, Vedi Chaudhri, Victoria Ding</br>
                March 27, 2020
            </h3>
        </div>


        <!-- intro -->
        <p class="bodyText drop-cap">
            San Francisco is one of the most popular cities to vacation, live, and work in, and the city attracts people from all around the world. Airbnbs have become an increasingly popular lodging option for people staying in the city for anywhere from one night
            to several months. In addition to factors such as location and price, ratings play a significant role in whether or not someone decides to stay in a certain Airbnb; customers rely heavily on what others think to make decisions. What factors
            distinguish a highly rated listing from a poorly rated one? How do characteristics about the host and the textual description of the listing correspond to its ratings?
        </p>

        <p class="bodyText">
            The map below shows all current Airbnb listings in the city of San Francisco. Airbnbs with a rating of above 90 are shown in green, ratings above 70 are shown in yellow, and ratings of 70 and below are shown in red. Unrated listings are shown in gray.
            For the purposes of this article, we define a poor rating as one that is 70 or below.
        </p>
        <p class="bodyText">
            Play around with the slider below to view listings with different ratings. Click on a point to learn more about it.
        </p>

        <!-- q1 viz -->
        <div id="sliderContainer">
            <h3>
                </br>Airbnb rating range</br>
            </h3>
            <input id="slider" class="thin cycle-marker" data-role="doubleslider" data-min="1" data-value-min="20" data-value-max="70" data-hint-position-min="bottom" data-hint-position-max="top" data-hint-always="true" data-cls-hint="bg-cyan fg-white" data-cls-complete="bg-cyan"
                data-cls-min-max="text-bold" />
            <div class="legend">
                <ul>
                    <li><span class="red"></span> &#8804; 70%</li>
                    <li><span class="yellow"></span> 71 - 90%</li>
                    <li><span class="green"></span> 91 - 100%</li>
                </ul>
            </div>
        </div>

        <div id='mapContainer'>
            <div id='listingInfo'>
                <div><strong>Listing:</strong> <span id='name'></span></div>
                <div><strong>Neighborhood:</strong> <span id='neighborhood'></span></div>
                <div><strong>Price:</strong> <span id='price'></span></div>
                <div><strong>Guests:</strong> <span id='numGuests'></span></div>
                <div><strong>Rating:</strong> <span id='rating'></span></div>
            </div>
            <input id="toggleListingsButton" type="button" value="Show unrated listings" />
            <div id='map'></div>
        </div>
        <script type='module'>
            import { renderMap } from './q1_map.js'; renderMap();
        </script>

        <div class="bodyText">
            The majority of rated Airbnbs have a rating of at least 90, and there are listings with ratings of under 70 and below scattered across the city. While there are no glaring patterns in the location of poorly rated listings, it seems that there is a slightly
            higher density of Airbnbs with poor ratings near the northeast of the city, in the Downtown/Civic Center neighborhood.
        </div>

        <div id="q2_container">
            <h3>Host Response Rate vs. Rating </h3>
            <div id='q2Container_1'></div>
            <script type='module'>
                import { render_q2_response_rate } from './q2.js'; render_q2_response_rate();
            </script>
            <div class=" bodyText">Figure 1: [TODO: add description]
            </div>
            <h3>Minimum Nights vs. Rating </h3>
            <div id='q2Container_2'></div>
            <script type='module'>
                import { render_q2_2 } from './q2.js'; render_q2_2();
            </script>
            <div class="bodyText">Figure 2: [TODO: add description]
            </div>
            <h3>Reviews per Month vs. Rating </h3>
            <div id='q2Container_3'></div>
            <script type='module'>
                import { render_q2_3 } from './q2.js'; render_q2_3();
            </script>
            <div class="bodyText">Figure 3: [TODO: add description]
            </div>
            <h3>Cleaning Fee vs. Cleanliness Rating </h3>
            <div id='q2Container_4'></div>
            <script type='module'>
                import { render_q2_4 } from './q2.js'; render_q2_4();
            </script>
            <div class="bodyText">Figure 4: [TODO: add description]
            </div>
            <h3>Price per Person vs. Rating </h3>
            <div id='q2Container_5'></div>
            <script type='module'>
                import { render_q2_5 } from './q2.js'; render_q2_5();
            </script>
            <div class="bodyText">Figure 5: [TODO: add description]
            </div>
            <h3>Host is Superhost vs. Rating -- FIX!!! </h3>
            <div id='q2Container_6'></div>
            <script type='module'>
                import { render_q2_6 } from './q2.js'; render_q2_6();
            </script>
            <div class="bodyText">Figure 6: [TODO: add description]
            </div>
        </div>
        <div class="bodyText">
            Given all this context, let's take a deeper dive into what hosts are saying in the best and worst AirBnBs. We looked at trigrams -- or sets of three words -- in these clusters: we defined the "low-rated" properties to have a score of less than 70, and
            a "high-rated" property to have the max score (the most commmon). We listed out trigrams that were mututally exclusive (i.e appear in only the top or bottom buckets). Interestingly, there's a fairly noticable difference.
        </div>
        <div class="bodyText">
            We found that the worst rated AirBnBs typically advertised that they host entrepreneurs, and were a "startup community." In general, these tend to be hacker houses: they're cramped, dorm-like, and expensive. In fact, some report cockroaches, unsafe environments,
            and price gouging. Problems include issues with electric wiring, fire safety, and gas odors. A report in Reuters suggested that these facilities take affordable housing and make it unaffordable; capitalizing on enterprising individuals moving
            to San Francisco to build a better future.
        </div>
        <div style="position:relative;" id="q3_bad_container">
            <h3><b> Phrases from the Worst Rated AirBnBs in San Francisco</h3>
            <div id="baddies">
                <div style="float:left;width:45%" id="baddies">
                </div>
                <div style="float:right;width:45%" id="baddies_q3tooltip">
                </div>
            </div>
            <div class="bodyText">
            <br>
            The best rated AirBnBs, on the other hand, stayed away from talking about Silicon Valley and the allure of the technology industry -- these AirBnBs talked more about "San Francisco", the beauty of the attractions (i.e. the Golden Gate Bridge), and the rich and premium products they offier (nice bedding, amenities, and products).
            </div>
            <div style="position:relative;" id="q3_good_container">
                <h3><b> Phrases from the Best Rated AirBnBs in San Francisco</h3>
                <div id="goodies">
                    <div style="float:left;width:45%" id="goodies">
                    </div>
                    <div style="float:right;width:45%" id="goodies_q3tooltip">
                    </div>
                </div>
            </div>
        <div class="bodyText">
            <br>
            These insights highlight the differences in language used between the top and bottom AirBnB listings. However, we'd encourage you to take these results with a grain of salt. Many of these trigrams exist in the same posts -- this is largely driven by the fact that AirBnB is dominated by third party providers (i.e Zeus Living) that have dozens of properties with the same listing titles. Given the fact they they're a corperate entity, many of their properties adhere to similar property standards (both good and bad), so they're biased towards the top or bottom of the rankings. Given that, it is evident that the best and worst AirBnBs cater to different audiences -- one towards visitors looking for a luxurious experience, and another towards hackers and geeks coming for the gold rush. 
        </div>
        <div class="bodyText">
            Now, get ready for something cool. Above, we listed the trigrams from the top and bottom AirBnB listings. Below, you'll have access to the whole dataset. Try and type out an AirBnB listing -- if you type a trigram that appears in the top set or the bottom set, it'll highlight as you type. Top trigrams will highlight in green, and bottom trigrams will highlight in red. Trigrams are case-insensitive, and can appear with or without punctuation -- your choice. So get started typing! 
        </div>
            <div style="position:relative;">
                <h3><b> Create your AirBnB Listing Descrption Below </h3>

                <div contentEditable="true" id="paragraphEdit" style="font-family:'IBM Plex Sans'; font-weight: 100; font-size: 18px; line-height: 1.833; color: black;">Type Here</div>
            </div>

            <script src="q3.js"></script>

            <div class="bodyText">
                <br><br><br><br><br>
                Through this article, we've characterized various aspects of AirBnB listings in San Francisco. From the location of the AirBnB, to various aspects of the AirBnB listing, like price, responsiveness, and number nights, to the actual text used in the AirBnB listing itself, there are many factors that influence if an AirBnB listing will be rated highly by users. Ultimately, AirBnB hosts that emphasize providing a quality experience throughout both the booking and staying process end up getting the highest ratings. There's no substitute for care. 
            </div>

        </div>
</body>

</html>